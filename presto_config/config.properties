coordinator=true
node-scheduler.include-coordinator=false
http-server.http.port=8080

# Aggressive memory settings to handle larger queries
query.max-memory=200GB
query.max-memory-per-node=64GB
query.max-total-memory-per-node=190GB
memory.heap-headroom-per-node=5GB

# Query settings
query.concurrency=4
discovery-server.enabled=true
discovery.uri=http://presto:8080

# Disable native execution to avoid memory issues
native-execution-enabled=false

# Disable hash optimizations that might cause issues
optimizer.optimize-hash-generation=false

# Aggressive spilling settings
hash-based-distinct-spilling-enabled=true
join-spilling-enabled=true
spiller-spill-path=/tmp/spill
spiller.max-used-space-threshold=0.9
spiller.threads=8

# Query execution settings
query.max-stage-count=200
query.max-history=200
query.min-schedule-split-batch-size=1
query.max-schedule-split-batch-size=2000

# Enable experimental spilling features
experimental.spill-enabled=true
experimental.spill-order-by=true
experimental.spill-window-function=true
